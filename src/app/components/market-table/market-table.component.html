<div class="w-full max-w-5xl mx-auto px-2 sm:px-4 lg:px-0">
  <p-table
    [value]="markets"
    [loading]="loading"
    [paginator]="true"
    [rows]="20"
    [rowsPerPageOptions]="[10, 20, 50]"
    [responsiveLayout]="'scroll'"
    selectionMode="single"
    (onRowSelect)="selectMarket($event)"
    styleClass="shadow-lg rounded-xl overflow-hidden border border-gray-200 dark:border-gray-800 w-full"
    [paginatorStyleClass]="'bg-transparent text-gray-700 dark:text-gray-200 flex items-center justify-center py-2'">
    <ng-template pTemplate="header">
      <tr class="bg-gray-50 dark:bg-gray-800 text-gray-700 dark:text-gray-200 text-base font-semibold font-mono">
        <th pSortableColumn="market_name" style="width:20%" class="py-4 px-4 font-semibold tracking-wide font-mono">
          <div class="flex items-center gap-2">
            Trading Pair
            <p-sortIcon field="market_name" />
          </div>
        </th>
        <th pSortableColumn="latest_price" style="width:20%" class="py-4 px-4 font-semibold tracking-wide font-mono">
          <div class="flex items-center gap-2">
            Price (USDT)
            <p-sortIcon field="latest_price" />
          </div>
        </th>
        <th pSortableColumn="price_change_24h" style="width:20%" class="py-4 px-4 font-semibold tracking-wide font-mono">
          <div class="flex items-center gap-2">
            24h Change
            <p-sortIcon field="price_change_24h" />
          </div>
        </th>
        <th pSortableColumn="total_volume_24h" style="width:20%" class="py-4 px-4 font-semibold tracking-wide font-mono">
          <div class="flex items-center gap-2">
            Volume
            <p-sortIcon field="total_volume_24h" />
          </div>
        </th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-market>
      <tr [pSelectableRow]="market" class="group transition cursor-pointer bg-white dark:bg-gray-900 hover:bg-blue-50 dark:hover:bg-gray-800">
        <td class="py-3 px-4 font-mono text-base font-medium text-gray-900 dark:text-white">
          {{ market.market_name }}
        </td>
        <td class="py-3 px-4 font-mono text-base font-medium" [ngClass]="market.price_change_24h >= 0 ? 'text-green-600 dark:text-green-400' : 'text-red-600 dark:text-red-400'" style="background: none; border: none;">
          {{ formatPrice(market.latest_price) }}
        </td>
        <td class="py-3 px-4 font-mono text-base font-medium" [ngClass]="market.price_change_24h >= 0 ? 'text-green-500 dark:text-green-300' : 'text-red-500 dark:text-red-300'" style="background: none; border: none;">
          <span>
            {{ formatChange(market.price_change_24h) }}
          </span>
        </td>
        <td class="py-3 px-4 font-mono text-base font-medium text-gray-900 dark:text-white">
          {{ formatVolume(market.total_volume_24h) }}
        </td>
      </tr>
    </ng-template>
  </p-table>

  <div class="text-xs text-gray-400 dark:text-gray-500 mt-3 text-right" *ngIf="lastUpdated">
    最後更新：{{ lastUpdated }}
  </div>
</div>
