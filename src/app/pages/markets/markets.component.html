<div>

    <p-table
        [value]="markets"
        [loading]="loading"
        [paginator]="true"
        [rows]="20"
        [rowsPerPageOptions]="[10, 20, 50]"
        [responsiveLayout]="'scroll'"
        selectionMode="single"
        (onRowSelect)="selectMarket($event)"
        styleClass="w-full">
        <ng-template pTemplate="header">
            <tr>
                <th>Trading Pair</th>
                <th>Price (USDT)</th>
                <th>24h Change</th>
                <th>Volume</th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-market>
            <tr [pSelectableRow]="market">
                <td>{{ market.market_name }}</td>
                <td [ngClass]="market.price_change_24h >= 0 ? 'text-green-500' : 'text-red-500'">
                    {{ formatPrice(market.latest_price) }}
                </td>
                <td [ngClass]="market.price_change_24h >= 0 ? 'text-green-500' : 'text-red-500'">
                    {{ formatChange(market.price_change_24h) }}
                </td>
                <td>{{ formatVolume(market.total_volume_24h) }}</td>
            </tr>
        </ng-template>
    </p-table>

    <div class="text-xs text-gray-400 mt-2" *ngIf="lastUpdated">最後更新：{{ lastUpdated }}</div>
</div>
